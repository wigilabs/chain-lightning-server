{"ast":null,"code":"const superagent = require('superagent');\n\nlet count = 0;\n\nconst handler = (req, res) => {\n  let events;\n  superagent.get('https://insights-api.newrelic.com/v1/accounts/2482859/query?nrql=SELECT+*+FROM+NagiosReport+SINCE+5+minutes+ago').set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd').set('Accept', 'application/json').end((err, response) => {\n    events = JSON.parse(response.text).results[0].events;\n    console.log('events: ', events); // events = {\n    //   'nagios': [\n    //     {name: 'Current Load':    value: 1},\n    //     {name: 'Current Users':   value: 1},\n    //     {name: 'HTTP':            value: 1},\n    //     {name: 'PING':            value: 1},\n    //     {name: 'Root Partition':  value: 1},\n    //     {name: 'SSH':             value: 1},\n    //     {name: 'Swap Usage':      value: 0},\n    //     {name: 'Total Processes': value: 1},\n    //   ],\n    //   'sabbix': [],\n    // }\n\n    events = [{\n      name: 'Current Load',\n      value: 1\n    }, {\n      name: 'Current Users',\n      value: 1\n    }, {\n      name: 'HTTP',\n      value: 1\n    }, {\n      name: 'PING',\n      value: 1\n    }, {\n      name: 'Root Partition',\n      value: 1\n    }, {\n      name: 'SSH',\n      value: 1\n    }, {\n      name: 'Swap Usage',\n      value: 0\n    }, {\n      name: 'Total Processes',\n      value: 1\n    }];\n    return res.json(events);\n  });\n};\n\nexport default handler;","map":{"version":3,"sources":["/Users/diterevan/Documents/projects/chain-lightning-server/pages/api/nagios-events.js"],"names":["superagent","require","count","handler","req","res","events","get","set","end","err","response","JSON","parse","text","results","console","log","name","value","json"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AAEA,IAAIC,KAAK,GAAG,CAAZ;;AAEA,MAAMC,OAAO,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AAE5B,MAAIC,MAAJ;AAEAN,EAAAA,UAAU,CACPO,GADH,CACO,iHADP,EAEGC,GAFH,CAEO,aAFP,EAEsB,uCAFtB,EAGGA,GAHH,CAGO,QAHP,EAGiB,kBAHjB,EAIGC,GAJH,CAIO,CAACC,GAAD,EAAMC,QAAN,KAAmB;AACtBL,IAAAA,MAAM,GAAGM,IAAI,CAACC,KAAL,CAAWF,QAAQ,CAACG,IAApB,EAA0BC,OAA1B,CAAkC,CAAlC,EAAqCT,MAA9C;AACAU,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBX,MAAxB,EAFsB,CAItB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,IAAAA,MAAM,GAAG,CACL;AAACY,MAAAA,IAAI,EAAE,cAAP;AAA0BC,MAAAA,KAAK,EAAE;AAAjC,KADK,EAEL;AAACD,MAAAA,IAAI,EAAE,eAAP;AAA0BC,MAAAA,KAAK,EAAE;AAAjC,KAFK,EAGL;AAACD,MAAAA,IAAI,EAAE,MAAP;AAA0BC,MAAAA,KAAK,EAAE;AAAjC,KAHK,EAIL;AAACD,MAAAA,IAAI,EAAE,MAAP;AAA0BC,MAAAA,KAAK,EAAE;AAAjC,KAJK,EAKL;AAACD,MAAAA,IAAI,EAAE,gBAAP;AAA0BC,MAAAA,KAAK,EAAE;AAAjC,KALK,EAML;AAACD,MAAAA,IAAI,EAAE,KAAP;AAA0BC,MAAAA,KAAK,EAAE;AAAjC,KANK,EAOL;AAACD,MAAAA,IAAI,EAAE,YAAP;AAA0BC,MAAAA,KAAK,EAAE;AAAjC,KAPK,EAQL;AAACD,MAAAA,IAAI,EAAE,iBAAP;AAA0BC,MAAAA,KAAK,EAAE;AAAjC,KARK,CAAT;AAWA,WAAOd,GAAG,CAACe,IAAJ,CAASd,MAAT,CAAP;AACD,GAlCH;AAmCD,CAvCD;;AAwCA,eAAeH,OAAf","sourcesContent":["const superagent = require('superagent');\n\nlet count = 0\n\nconst handler = (req, res) => {\n\n  let events\n\n  superagent\n    .get('https://insights-api.newrelic.com/v1/accounts/2482859/query?nrql=SELECT+*+FROM+NagiosReport+SINCE+5+minutes+ago')\n    .set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd')\n    .set('Accept', 'application/json')\n    .end((err, response) => {\n      events = JSON.parse(response.text).results[0].events\n      console.log('events: ', events)\n\n      // events = {\n      //   'nagios': [\n      //     {name: 'Current Load':    value: 1},\n      //     {name: 'Current Users':   value: 1},\n      //     {name: 'HTTP':            value: 1},\n      //     {name: 'PING':            value: 1},\n      //     {name: 'Root Partition':  value: 1},\n      //     {name: 'SSH':             value: 1},\n      //     {name: 'Swap Usage':      value: 0},\n      //     {name: 'Total Processes': value: 1},\n      //   ],\n      //   'sabbix': [],\n      // }\n\n      events = [\n          {name: 'Current Load',    value: 1},\n          {name: 'Current Users',   value: 1},\n          {name: 'HTTP',            value: 1},\n          {name: 'PING',            value: 1},\n          {name: 'Root Partition',  value: 1},\n          {name: 'SSH',             value: 1},\n          {name: 'Swap Usage',      value: 0},\n          {name: 'Total Processes', value: 1},\n        ]\n\n      return res.json(events);\n    });\n};\nexport default handler;\n"]},"metadata":{},"sourceType":"module"}