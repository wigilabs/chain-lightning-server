{"ast":null,"code":"import Cors from 'micro-cors';\nconst cors = Cors();\n\nconst superagent = require('superagent');\n\nconst handler = (req, res) => {\n  let events;\n  superagent.get('https://insights-api.newrelic.com/v1/accounts/2482859/query?nrql=SELECT+%60_raw%60%2C%60_sourcetype%60%2C%60source%60+FROM+splunkUpdateLogs%2C+splunkApacheAccess%2C+splunkApacheErrors%2C+splunkAuthLogs%2C+splunkHttp%2C+splunkKernel%2C+splunkSystemctl+WHERE+%60_raw%60+NOT+LIKE+%27%25CRON%25%27+LIMIT+3+').set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd').set('Accept', 'application/json').end((err, response) => {\n    events = JSON.parse(response.text).results[0].events;\n    console.log(\" => Events 1 : \", events[0]._raw);\n    console.log(\" => Events 2 : \", events[1]._raw);\n    console.log(\" => Events 3 : \", events[2]._raw);\n    console.log(\"\\n-----------------------------------------------------------------------------------------------------------------------------------------------\\n\");\n    let eval1 = events[0]._raw;\n    let eval2 = events[1]._raw;\n    let eval3 = events[2]._raw;\n    console.log(\" => Events 1 : \", eval1._raw);\n    console.log(\" => Events 2 : \", eval2._raw);\n    console.log(\" => Events 3 : \", eval3._raw);\n    console.log(\"\\n--------------------------------------------------------------------------------------------------------------------------------------------\\n\");\n    return res.json(events);\n  });\n};\n\nexport default cors(handler);","map":{"version":3,"sources":["C:/Users/fsoler/Desktop/chain-lightning-server/pages/api/splunk-events.js"],"names":["Cors","cors","superagent","require","handler","req","res","events","get","set","end","err","response","JSON","parse","text","results","console","log","_raw","eval1","eval2","eval3","json"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,YAAjB;AAEA,MAAMC,IAAI,GAAGD,IAAI,EAAjB;;AAEA,MAAME,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AACA,MAAMC,OAAO,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5B,MAAIC,MAAJ;AACAL,EAAAA,UAAU,CACPM,GADH,CACO,gTADP,EAEGC,GAFH,CAEO,aAFP,EAEsB,uCAFtB,EAGGA,GAHH,CAGO,QAHP,EAGiB,kBAHjB,EAIGC,GAJH,CAIO,CAACC,GAAD,EAAMC,QAAN,KAAmB;AACtBL,IAAAA,MAAM,GAAGM,IAAI,CAACC,KAAL,CAAWF,QAAQ,CAACG,IAApB,EAA0BC,OAA1B,CAAkC,CAAlC,EAAqCT,MAA9C;AACAU,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BX,MAAM,CAAC,CAAD,CAAN,CAAUY,IAAxC;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BX,MAAM,CAAC,CAAD,CAAN,CAAUY,IAAxC;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BX,MAAM,CAAC,CAAD,CAAN,CAAUY,IAAxC;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,qJAAZ;AACA,QAAIE,KAAK,GAAGb,MAAM,CAAC,CAAD,CAAN,CAAUY,IAAtB;AACA,QAAIE,KAAK,GAAGd,MAAM,CAAC,CAAD,CAAN,CAAUY,IAAtB;AACA,QAAIG,KAAK,GAAGf,MAAM,CAAC,CAAD,CAAN,CAAUY,IAAtB;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BE,KAAK,CAACD,IAArC;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BG,KAAK,CAACF,IAArC;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BI,KAAK,CAACH,IAArC;AACIF,IAAAA,OAAO,CAACC,GAAR,CAAY,kJAAZ;AACJ,WAAOZ,GAAG,CAACiB,IAAJ,CAAShB,MAAT,CAAP;AACD,GAlBH;AAmBD,CArBD;;AAuBA,eAAeN,IAAI,CAACG,OAAD,CAAnB","sourcesContent":["import Cors from 'micro-cors'\r\n\r\nconst cors = Cors()\r\n\r\nconst superagent = require('superagent');\r\nconst handler = (req, res) => {\r\n  let events\r\n  superagent\r\n    .get('https://insights-api.newrelic.com/v1/accounts/2482859/query?nrql=SELECT+%60_raw%60%2C%60_sourcetype%60%2C%60source%60+FROM+splunkUpdateLogs%2C+splunkApacheAccess%2C+splunkApacheErrors%2C+splunkAuthLogs%2C+splunkHttp%2C+splunkKernel%2C+splunkSystemctl+WHERE+%60_raw%60+NOT+LIKE+%27%25CRON%25%27+LIMIT+3+')\r\n    .set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd')\r\n    .set('Accept', 'application/json')\r\n    .end((err, response) => {\r\n      events = JSON.parse(response.text).results[0].events\r\n      console.log(\" => Events 1 : \",events[0]._raw);\r\n      console.log(\" => Events 2 : \",events[1]._raw);\r\n      console.log(\" => Events 3 : \",events[2]._raw);\r\n      console.log(\"\\n-----------------------------------------------------------------------------------------------------------------------------------------------\\n\")\r\n      let eval1 = events[0]._raw;\r\n      let eval2 = events[1]._raw;\r\n      let eval3 = events[2]._raw;\r\n      console.log(\" => Events 1 : \", eval1._raw);\r\n      console.log(\" => Events 2 : \", eval2._raw);\r\n      console.log(\" => Events 3 : \", eval3._raw);\r\n          console.log(\"\\n--------------------------------------------------------------------------------------------------------------------------------------------\\n\")\r\n      return res.json(events);\r\n    });\r\n};\r\n\r\nexport default cors(handler);\r\n"]},"metadata":{},"sourceType":"module"}