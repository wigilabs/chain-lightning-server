{"ast":null,"code":"const superagent = require('superagent');\n\nconst handler = (req, res) => {\n  let events;\n  superagent.get('https://insights-api.newrelic.com/v1/accounts/2482859/query?nrql=SELECT%20description%20FROM%20ZabbixAgent,%20ZabbixHTTP,%20ZabbixSSH%20limit%203').set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd').set('Accept', 'application/json').end((err, response) => {\n    events = JSON.parse(response.text).results[0].events;\n    console.log('events: ', events);\n    var self = this; //      events.forEach((element, index, array) => {\n    //     console.log(\"=====================================================================\")\n    //     console.log(index)\n    //          delete element.timestamp\n    //          switch (index) {\n    //              case 0 : //ssh\n    //                    element.name=index\n    //              case 1 : //http\n    //                    element.name=index\n    //              case 2 : //agent\n    //                    element.name=index\n    //                         }\n    //     console.log(\"=====================================================================\")\n    // });\n\n    /*events = [\n      {\n        name: 'SSH',\n        value: 1\n      },\n      {\n        name: 'HTTP',\n        value: 1\n      },\n      {\n        name: 'Agent',\n        value: 1\n      }\n            ]*/\n\n    return res.json(events);\n  });\n};\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}