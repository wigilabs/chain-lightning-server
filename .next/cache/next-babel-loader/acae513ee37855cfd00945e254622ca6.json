{"ast":null,"code":"/*\r\nconst superagent = require('superagent');\r\n\r\n\r\n  let events\r\nfunction resapi(argvz) {\r\n  superagent\r\n    .get(argvz)\r\n    .set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd')\r\n    .set('Accept', 'application/json')\r\n    .end((err, response) => {\r\n      events = JSON.parse(response.text).results[0].events\r\n      console.log('events: ', events)\r\n\r\n      events = [\r\n          {name: 'Current Load',    value: 1},\r\n          {name: 'Current Users',   value: 1},\r\n          {name: 'HTTP',            value: 0},\r\n          {name: 'PING',            value: 1},\r\n          {name: 'Root Partition',  value: 1},\r\n          {name: 'SSH',             value: 0},\r\n          {name: 'Swap Usage',      value: 1},\r\n          {name: 'Total Processes', value: 1},\r\n        ]\r\n\r\n      let result = res.json(events);\r\n      return result;\r\n    });\r\n    return result;\r\n}\r\n\r\nconst zabbix = (req, res) => {\r\n   let  data1=resapi(\"https://insights.newrelic.com/accounts/2482859/query?query=SELECT%20*%20FROM%20ZabbixHTTP\");\r\n   let data2=resapi(\"https://insights.newrelic.com/accounts/2482859/query?query=SELECT%20*%20FROM%20ZabbixSSH\");\r\n   let data3=resapi(\"https://insights.newrelic.com/accounts/2482859/query?query=SELECT%20*%20FROM%20ZabbixAgent\");\r\n    console.log(\" - d1 : \",data1);\r\n    console.log(\" - d2 : \",data2);\r\n    console.log(\" - d3 : \",data3);\r\n};\r\nexport default zabbix;\r\n*/\nconst superagent = require('superagent');\n\nconst handler = (req, res) => {\n  let events;\n  superagent.get('https://insights.newrelic.com/accounts/2482859/query?query=SELECT%20*%20FROM%20ZabbixHTTP').set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd').set('Accept', 'application/json').end((err, response) => {\n    events = JSON.parse(response.text).results[0].events;\n    console.log('events: ', events);\n    events = [{\n      name: 'Current Load',\n      value: 1\n    }, {\n      name: 'Current Users',\n      value: 1\n    }, {\n      name: 'HTTP',\n      value: 0\n    }, {\n      name: 'PING',\n      value: 1\n    }, {\n      name: 'Root Partition',\n      value: 1\n    }, {\n      name: 'SSH',\n      value: 0\n    }, {\n      name: 'Swap Usage',\n      value: 1\n    }, {\n      name: 'Total Processes',\n      value: 1\n    }];\n    return res.json(events);\n  });\n};\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}