{"ast":null,"code":"const superagent = require('superagent');\n\nconst handler = (req, res) => {\n  let events;\n  superagent.get('https://insights-api.newrelic.com/v1/accounts/2482859/query?nrql=SELECT%20description%20FROM%20ZabbixAgent,%20ZabbixHTTP,%20ZabbixSSH%20limit%203').set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd').set('Accept', 'application/json').end((err, response) => {\n    events = JSON.parse(response.text).results[0].events;\n    console.log('events: ', events);\n    events[0].forEach((element, index, array) => {\n      console.log(element.timestamp); // 100, 200, 300\n\n      console.log(index); // 0, 1, 2\n\n      console.log(array); // same myArray object 3 times\n    });\n    /*events = [\r\n      {\r\n        name: 'SSH',\r\n        value: 1\r\n      }, \r\n      {\r\n        name: 'HTTP',\r\n        value: 1\r\n      }, \r\n      {\r\n        name: 'Agent',\r\n        value: 1\r\n      }\r\n            ]*/\n\n    return res.json(events);\n  });\n};\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}