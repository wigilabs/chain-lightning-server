{"ast":null,"code":"const superagent = require('superagent');\n\nconst handler = (req, res) => {\n  let events;\n  superagent.get('https://insights-api.newrelic.com/v1/accounts/2482859/query?nrql=SELECT+*+FROM+NagiosReport+SINCE+5+minutes+ago').set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd').set('Accept', 'application/json').end((err, response) => {\n    events = JSON.parse(response.text).results[0].events;\n    let derObj = events[0];\n    console.log('events: ', derObj[\"Current Load\"]);\n    let value_load;\n    let value_users;\n    let value_http;\n    let ping_value;\n    let root_partition;\n    let ssh_value;\n    let swap_value;\n    let total_value;\n    events = [{\n      name: 'Current Load',\n      value: 1\n    }, {\n      name: 'Current Users',\n      value: 1\n    }, {\n      name: 'HTTP',\n      value: 0\n    }, {\n      name: 'PING',\n      value: 1\n    }, {\n      name: 'Root Partition',\n      value: 1\n    }, {\n      name: 'SSH',\n      value: 0\n    }, {\n      name: 'Swap Usage',\n      value: 1\n    }, {\n      name: 'Total Processes',\n      value: 1\n    }];\n    return res.json(events);\n  });\n};\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}