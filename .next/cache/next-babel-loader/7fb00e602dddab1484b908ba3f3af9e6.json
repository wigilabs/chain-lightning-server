{"ast":null,"code":"const superagent = require('superagent');\n\nconst handler = (req, res) => {\n  let events;\n  superagent.get('https://insights-api.newrelic.com/v1/accounts/2482859/query?nrql=SELECT+*+FROM+NagiosReport+SINCE+5+minutes+ago').set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd').set('Accept', 'application/json').end((err, response) => {\n    events = JSON.parse(response.text).results[0].events;\n    console.log('events: ', events);\n    events = {\n      'nagios': [{\n        'Current Load': 1\n      }, {\n        'Current Users': 1\n      }, {\n        'HTTP': 1\n      }, {\n        'PING': 1\n      }, {\n        'Root Partition': 1\n      }, {\n        'SSH': 1\n      }, {\n        'Swap Usage': 0\n      }, {\n        'Total Processes': 1\n      }],\n      'sabbix': []\n    };\n    return res.json(events);\n  });\n};\n\nexport default handler;","map":{"version":3,"sources":["/Users/diterevan/Documents/projects/chain-lightning-server/pages/api/nagios-events.js"],"names":["superagent","require","handler","req","res","events","get","set","end","err","response","JSON","parse","text","results","console","log","json"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AAEA,MAAMC,OAAO,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AAE5B,MAAIC,MAAJ;AAEAL,EAAAA,UAAU,CACPM,GADH,CACO,iHADP,EAEGC,GAFH,CAEO,aAFP,EAEsB,uCAFtB,EAGGA,GAHH,CAGO,QAHP,EAGiB,kBAHjB,EAIGC,GAJH,CAIO,CAACC,GAAD,EAAMC,QAAN,KAAmB;AACtBL,IAAAA,MAAM,GAAGM,IAAI,CAACC,KAAL,CAAWF,QAAQ,CAACG,IAApB,EAA0BC,OAA1B,CAAkC,CAAlC,EAAqCT,MAA9C;AACAU,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBX,MAAxB;AAEAA,IAAAA,MAAM,GAAG;AACP,gBAAU,CACR;AAAC,wBAAmB;AAApB,OADQ,EAER;AAAC,yBAAmB;AAApB,OAFQ,EAGR;AAAC,gBAAmB;AAApB,OAHQ,EAIR;AAAC,gBAAmB;AAApB,OAJQ,EAKR;AAAC,0BAAmB;AAApB,OALQ,EAMR;AAAC,eAAmB;AAApB,OANQ,EAOR;AAAC,sBAAmB;AAApB,OAPQ,EAQR;AAAC,2BAAmB;AAApB,OARQ,CADH;AAWP,gBAAU;AAXH,KAAT;AAcA,WAAOD,GAAG,CAACa,IAAJ,CAASZ,MAAT,CAAP;AACD,GAvBH;AAwBD,CA5BD;;AA6BA,eAAeH,OAAf","sourcesContent":["const superagent = require('superagent');\n\nconst handler = (req, res) => {\n\n  let events\n\n  superagent\n    .get('https://insights-api.newrelic.com/v1/accounts/2482859/query?nrql=SELECT+*+FROM+NagiosReport+SINCE+5+minutes+ago')\n    .set('X-Query-Key', 'NRIQ-j7zJFckfarn9jsOB-nPscK5H6z0QCgHd')\n    .set('Accept', 'application/json')\n    .end((err, response) => {\n      events = JSON.parse(response.text).results[0].events\n      console.log('events: ', events)\n\n      events = {\n        'nagios': [\n          {'Current Load':    1},\n          {'Current Users':   1},\n          {'HTTP':            1},\n          {'PING':            1},\n          {'Root Partition':  1},\n          {'SSH':             1},\n          {'Swap Usage':      0},\n          {'Total Processes': 1},\n        ],\n        'sabbix': [],\n      }\n\n      return res.json(events);\n    });\n};\nexport default handler;\n"]},"metadata":{},"sourceType":"module"}